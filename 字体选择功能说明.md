# 字体选择功能详细说明

## 功能概述

遇心系统新增了专业的字体选择功能，特别为ADHD用户和有阅读障碍的用户设计。用户可以根据自己的阅读习惯和视觉需求，从6种精心挑选的ADHD友好字体中选择最适合的字体。

## 字体选项详解

### 1. 圆润字体 (HZMaruGothic) - 默认推荐 ⭐
- **特点**: 温馨圆润，减少视觉疲劳
- **适用场景**: 长时间阅读，情绪敏感用户
- **优势**: 柔和的字形设计，符合心理咨询的温暖氛围

### 2. 思源黑体 (Noto Sans SC)
- **特点**: 清晰易读，适合长时间阅读
- **适用场景**: 专业文档阅读，需要高清晰度的场合
- **优势**: Google开发的专业中文字体，覆盖全面

### 3. Source Han Sans
- **特点**: 专业设计，字形规整
- **适用场景**: 正式场合，需要专业感的环境
- **优势**: Adobe与Google合作开发，品质保证

### 4. Inter
- **特点**: 现代简洁，数字友好
- **适用场景**: 包含大量数字和英文的内容
- **优势**: 专为屏幕阅读优化，数字识别度高

### 5. Lexend
- **特点**: 专为阅读速度优化
- **适用场景**: 需要快速阅读理解的用户
- **优势**: 基于阅读研究开发，提升阅读效率

### 6. Atkinson Hyperlegible
- **特点**: 专为视觉障碍用户设计
- **适用场景**: 视力较弱或有阅读障碍的用户
- **优势**: 字符区分度极高，减少混淆

## 功能特性

### 🎯 实时预览
- **悬停预览**: 鼠标悬停在字体选项上即可实时预览效果
- **即时应用**: 点击选择后立即应用到整个页面
- **平滑过渡**: 字体切换有平滑的动画效果

### 💾 偏好记忆
- **本地存储**: 用户的字体选择会自动保存到浏览器本地存储
- **自动加载**: 下次访问时自动应用用户之前选择的字体
- **跨会话保持**: 关闭浏览器重新打开后设置依然有效

### ⌨️ 无障碍支持
- **键盘导航**: 完全支持Tab键和方向键导航
- **屏幕阅读器**: 提供完整的aria标签支持
- **焦点管理**: 清晰的焦点指示器和逻辑导航顺序

### 🔔 用户反馈
- **切换通知**: 字体切换后显示温馨的确认通知
- **视觉反馈**: 当前选中的字体有明确的视觉标识
- **状态指示**: 选择器的开关状态有清晰的图标指示

## 使用方法

### 基本操作
1. **打开选择器**: 点击页面右上角的"字体"按钮
2. **预览字体**: 将鼠标悬停在任意字体选项上查看预览效果
3. **选择字体**: 点击喜欢的字体选项
4. **确认应用**: 字体会立即应用到整个页面，并显示确认通知

### 键盘操作
- **Tab键**: 在字体选择器和选项间导航
- **Enter/空格**: 激活按钮或选择字体
- **方向键**: 在字体选项间快速切换
- **Escape**: 关闭字体选择器

### 移动端适配
- **响应式设计**: 在移动设备上自动调整布局
- **触摸友好**: 按钮和选项都有足够的触摸区域
- **位置优化**: 在小屏幕上自动调整选择器位置

## 技术实现

### CSS架构
```css
/* 字体变量系统 */
:root {
    --font-marugo: 'HZMaruGothic', 'Noto Sans SC', sans-serif;
    --font-noto: 'Noto Sans SC', sans-serif;
    --font-source: 'Source Han Sans SC', sans-serif;
    --font-inter: 'Inter', 'Noto Sans SC', sans-serif;
    --font-lexend: 'Lexend', 'Noto Sans SC', sans-serif;
    --font-atkinson: 'Atkinson Hyperlegible', 'Noto Sans SC', sans-serif;
}
```

### JavaScript核心功能
- **字体映射系统**: 将字体键名映射到CSS变量
- **本地存储管理**: localStorage API管理用户偏好
- **事件处理**: 完整的点击、悬停、键盘事件处理
- **动态样式更新**: 实时更新CSS变量和样式

### 性能优化
- **字体预加载**: 通过Google Fonts API预加载所有字体
- **缓存策略**: 浏览器自动缓存字体文件
- **渐进增强**: 即使字体加载失败也有合适的后备字体

## ADHD友好设计原则

### 认知负荷减少
- **简单界面**: 字体选择器界面简洁明了
- **清晰分类**: 每种字体都有明确的描述和适用场景
- **即时反馈**: 所有操作都有立即的视觉反馈

### 注意力支持
- **固定位置**: 字体选择器位置固定，容易找到
- **视觉提示**: 当前选中的字体有明显的标识
- **专注模式**: 选择器打开时其他内容会略微变暗

### 个性化支持
- **多样选择**: 6种不同特性的字体满足不同需求
- **偏好记忆**: 系统记住用户的选择，减少重复操作
- **灵活切换**: 随时可以更换字体，适应不同情境

## 用户体验亮点

### 温馨专业
- **配色一致**: 选择器使用与整站一致的温暖配色
- **动画流畅**: 所有交互都有平滑的动画过渡
- **通知友好**: 字体切换通知使用温馨的语言和图标

### 包容性设计
- **多种需求**: 覆盖不同类型的阅读障碍和视觉需求
- **无障碍**: 完全符合WCAG无障碍标准
- **跨平台**: 在各种设备和浏览器上都能正常工作

## 未来扩展

### 计划功能
- **字体大小调节**: 增加字体大小的动态调节功能
- **行间距调节**: 提供行间距的个性化设置
- **对比度调节**: 增加文字对比度的调节选项
- **阅读模式**: 专门的阅读模式，进一步优化阅读体验

### 技术改进
- **字体子集**: 只加载需要的字符，减少加载时间
- **智能推荐**: 根据用户行为推荐最适合的字体
- **A/B测试**: 通过数据分析优化字体选择

这个字体选择功能体现了遇心系统对用户体验的深度关注，特别是对有特殊需求用户的包容性设计理念。
